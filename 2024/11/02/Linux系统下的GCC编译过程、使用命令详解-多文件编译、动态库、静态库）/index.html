

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="OneAmx">
  <meta name="keywords" content="">
  
    <meta name="description" content="Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库） 备注：自己老是忘记完整的流程，所以索性找个帖子记录一下 转载自：Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）  GCC编译命令  GCC编译分为4步骤处理： 一个C&#x2F;C++文件要经过预处理（preprocessing）、编译（compilation）、汇编（assembly）和链">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）">
<meta property="og:url" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/index.html">
<meta property="og:site_name" content="喝口白桃呜龙">
<meta property="og:description" content="Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库） 备注：自己老是忘记完整的流程，所以索性找个帖子记录一下 转载自：Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）  GCC编译命令  GCC编译分为4步骤处理： 一个C&#x2F;C++文件要经过预处理（preprocessing）、编译（compilation）、汇编（assembly）和链">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/d90ae88987be4ff8ad30a1de11faddd8.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/53f3ac0e246787a4f8952cec80b1dcfe.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/a971fc5f6993938e94446cce65f4fe26.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/7a40ca695e4f3c9f361520ce1763dd08-1730563015496-43.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/d56b22f1848b8a2b3fb1ec51c3168d4d.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/fac384d8ab6366baba800ee5f931f335.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/a42b7a98b09eea8068d8976fed486f72.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/8f38f00fce822232a663d2f40884e5d4.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/75a17962fe308eaf07df6181f942c3f7.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/cadc7372e4b2718870940536f2b15e67.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/4a5d52cad6577fcba0b35d3660322ed9.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/a548bedc59a5899edb31ee67d8c5a916.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/17e0ff476fff856950b86f996364927d.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/b6f24b953a6125f089a071f916eb0e71.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/075b3612c0c9e1fac743e0dd13fdb63e.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/8ef74a90b58822aca1c8b5bc3b2a351b.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/48f78486c8a23176147189a8a662498f.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/7efe1556b12bae35cbfb1b3fc19e6841.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/4ce9f58bd32c2e6f3ed6207781e7e0a9.png">
<meta property="og:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/5220def4709b3697ab9ea6e511a8032c.png">
<meta property="article:published_time" content="2024-11-02T15:18:25.000Z">
<meta property="article:modified_time" content="2024-11-02T15:56:57.509Z">
<meta property="article:author" content="OneAmx">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/d90ae88987be4ff8ad30a1de11faddd8.png">
  
  
  
  <title>Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库） - 喝口白桃呜龙</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/mouse.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>喝口白桃呜龙</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-11-02 23:18" pubdate>
          2024年11月2日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.7k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          31 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          浏览 <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Linux系统下的GCC编译过程、使用命令详解-多文件编译、动态库、静态库）"><a href="#Linux系统下的GCC编译过程、使用命令详解-多文件编译、动态库、静态库）" class="headerlink" title="Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）"></a>Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）</h1><blockquote>
<p>备注：自己老是忘记完整的流程，所以索性找个帖子记录一下</p>
<p>转载自：Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）</p>
</blockquote>
<h2 id="GCC编译命令"><a href="#GCC编译命令" class="headerlink" title="GCC编译命令"></a>GCC编译命令</h2><img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/d90ae88987be4ff8ad30a1de11faddd8.png" srcset="/img/loading.gif" lazyload alt="请添加图片描述" style="zoom:67%;">

<p>GCC编译分为4步骤处理：</p>
<p>一个C&#x2F;C++文件要经过预处理（preprocessing）、编译（compilation）、汇编（assembly）和链接（linking）等4步才能变成可执行文件。</p>
<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/53f3ac0e246787a4f8952cec80b1dcfe.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述">

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/a971fc5f6993938e94446cce65f4fe26.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述">

<p>创建文件hello.c</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-comment">/* 执行命令: ./hello dengzj </span><br><span class="hljs-comment"> * argc = 2</span><br><span class="hljs-comment"> * argv[0] = ./hello</span><br><span class="hljs-comment"> * argv[1] = dengzj</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> xxx 10</span><br><br><span class="hljs-comment">/*argc：argument count  argv: argument value*/</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> **argv)</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (argc &gt;= <span class="hljs-number">2</span>)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello, %s,%d!\n&quot;</span>, argv[<span class="hljs-number">1</span>],xxx);<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello, world! %d\n&quot;</span>,xxx);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>gcc基本用法：gcc [option] [filenames]</p>
<p>编译hello.c文件 不加参数(option) ；gcc filenames则 默认输出为a.out</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc hello.c<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/7a40ca695e4f3c9f361520ce1763dd08-1730563015496-43.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>通常编译hello.c 使用-o参数可命名文件，将hello.c编译后命名为hello，即gcc命令后的-o参数的位置不固定，带-o参数后面一定接编译后的文件名。这也是后续编译.c文件使用最多的命令。结果如下图所示:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc hello.c -o hello<br>//或者<br>gcc -o hello hello.c<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/d56b22f1848b8a2b3fb1ec51c3168d4d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>-o file 指定输出文件名为file 。无论是预处理、编译、汇编还是链接，这个选项都可<br>以使用。如果没有使用 o’ 选项，默认的输出结果是：可执行文件为a.out。</p>
<p>以上是学习中大多数时候使用的gcc编译指令，上面代码是一步到位的得到链接后的文件，其本质是要经过预处理 编译 汇编 链接这四步。等同于下面的4行指令依次完成。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -E -o hello.i hello.c <br>gcc -S -o hello.s hello.i <br>gcc -c -o hello.o hello.s <br>gcc -o hello hello.o<br></code></pre></td></tr></table></figure>

<h3 id="1、预处理gcc-E"><a href="#1、预处理gcc-E" class="headerlink" title="1、预处理gcc -E"></a>1、预处理gcc -E</h3><p>最开始编写的hello.c文件变为<code>hello.i</code>文件， 展开宏、头文件，处理 #include、#define、条件编译等指令，替换条件编译，删除注释、空行、空白。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -E -o hello.i hello.c<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/fac384d8ab6366baba800ee5f931f335.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>打开文件里面就是一些头文件路径即展开宏。打开hello.i文件，在vim的命令模式下输入&#x2F;main后会看见源代码的xxx宏已经展开后得到数值为10。</p>
<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/a42b7a98b09eea8068d8976fed486f72.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<h3 id="2、编译gcc-S"><a href="#2、编译gcc-S" class="headerlink" title="2、编译gcc -S"></a>2、编译gcc -S</h3><p><strong>.i</strong>文件编译得到汇编形式的<code>hello.s</code>，检测语法规范，进行词法分析、语法分析、语义分析，消耗时间、系统资源最多。同样用vim 打开文件可查看到汇编形式的代码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -S -o hello.s hello.i <br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/8f38f00fce822232a663d2f40884e5d4.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>同理，灵活使用，可将上面融合为一步。gcc -S -o hello.s hello.c，可直接将hello.c文件编译为汇编形式，并<code>命名为hello.s</code>。</p>
<h3 id="3、汇编gcc-c"><a href="#3、汇编gcc-c" class="headerlink" title="3、汇编gcc -c"></a>3、汇编gcc -c</h3><p>(1) 得到hello.o文件，将汇编指令翻译成机器指令，进入则看到的是一堆机器码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -c -o hello.o hello.s <br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/75a17962fe308eaf07df6181f942c3f7.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>(2) .c文件直接-c，预处理、编译和汇编源文件，<strong>但是不作链接</strong>，编译器根据源文件生成OBJ 文件。多用于<strong>多文件编译</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -o hello.o -c hello.s<br></code></pre></td></tr></table></figure>

<h3 id="4、链接-无参数"><a href="#4、链接-无参数" class="headerlink" title="4、链接 无参数"></a>4、链接 无参数</h3><p>数据段合并 将生成的.obj文件与库文件.lib等文件链接，生成可执行文件ELF格式，地址回填。<br>将hell.o和库文件、系统文件的一系列.o文件进行链接。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -o hello hello.o<br></code></pre></td></tr></table></figure>

<p>最终输出的文件结果</p>
<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/cadc7372e4b2718870940536f2b15e67.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>ELF格式查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">file hello<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/4a5d52cad6577fcba0b35d3660322ed9.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<h3 id="5、完整编译过程"><a href="#5、完整编译过程" class="headerlink" title="5、完整编译过程"></a>5、完整编译过程</h3><p>查看gcc完整编译过程，带-v参数，输出结果复制到Notepad++打开</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -o hello hello.o -v<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/a548bedc59a5899edb31ee67d8c5a916.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p><u>as 汇编器</u> 用于把汇编文件（汇编语言）转换为目标文件（机器码），完成 .s到 .o 的工作<br><u>ld 链接器</u> 用于把编译生成的多个目标文件链接组织为可执行文件</p>
<h2 id="进阶用法"><a href="#进阶用法" class="headerlink" title="进阶用法"></a>进阶用法</h2><h3 id="1、多文件编译成一个可执行文件"><a href="#1、多文件编译成一个可执行文件" class="headerlink" title="1、多文件编译成一个可执行文件"></a>1、多文件编译成一个可执行文件</h3><img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/17e0ff476fff856950b86f996364927d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom: 80%;">

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// main.c</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;sub.h&quot;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Main fun!\n&quot;</span>);<br>    sub_fun();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// sub.c</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">sub_fun</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Sub fun!\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// sub.h</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">sub_fun</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>一条命令，处理多个源文件。以此类推，10个文件编写，在后面加10个文件名即可。实际工程中，文件一多起来就不行了(需要makefile，但手搓makefile已过时，现在是cmake的天下，自动生成makefile，makefile是时代的悲哀)，因此gcc的缺点是对所有文件都需要再一次处理。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -o <span class="hljs-built_in">test</span> main.c sub.c<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/b6f24b953a6125f089a071f916eb0e71.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>当多文件(比如100个文件)进行编译，其中一个文件需要修改时，因为只是某些修改文件的内容，而后其余文件却要被重新处理一次，使用上面这条命令就显得很浪费时间。因此可以使用<code>-c</code>命令只进行前三个步骤(预处理、编译、汇编)，最后再统一链接。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -c -o main.o main.c<br>gcc -c -o sub.o sub.c<br>gcc -o <span class="hljs-built_in">test</span> main.o sub.o<br></code></pre></td></tr></table></figure>

<p>这样在只修改某些文件时，只需要执行对应的-c命令即可。</p>
<h3 id="2、gcc编译参数中-I的作用"><a href="#2、gcc编译参数中-I的作用" class="headerlink" title="2、gcc编译参数中-I的作用"></a>2、gcc编译参数中-I的作用</h3><ul>
<li>-I ( i 的大写) ：指定头文件路径（相对路径或绝对路径）</li>
<li>-i ：指定头文件名字 (一般不使用，而是直接放在**.c 文件中通过#include&lt;***.h&gt; 添加)</li>
<li>-L ：指定连接的动态库或者静态库路径（相对路径或绝对路径）</li>
<li>-l (L的小写)：指定需要链接的库的名字（链接 libc.a :-lc 链接动态库：libc.so : -lc 注意：-l后面直接添加库名省去“lib”和“.so”或“.a” ）</li>
</ul>
<p>main.c的头文件中，<code>&lt;&gt;</code>代表在系统目录或工具链的默认的指定路径目录下查找，编译时加上-v选项可查看，<code> &quot; &quot;</code>代表在当前目录下查找文件。</p>
<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/075b3612c0c9e1fac743e0dd13fdb63e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>-I .&#x2F; 在当前路径查看头文件，编译成功。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -c -o main.o main.c -I ./<br></code></pre></td></tr></table></figure>

<h3 id="3、静态库"><a href="#3、静态库" class="headerlink" title="3、静态库"></a>3、静态库</h3><p>静态库：程序的链接阶段被复制到程序中</p>
<p>每个需要使用静态库的程序都要将整个静态库编译到可执行程序中，若静态库50M，10个程序要500M。</p>
<p>库函数本地化，优点调用速度快，缺点是系统资源消耗大，多用于对时间要求较高的核心程序。</p>
<p>未链接sub.c文件，文件编译时可以将其他文件生成.o文件制作成库来使用<strong>ar rcs lib库名.a 一系列.o文件</strong></p>
<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/8ef74a90b58822aca1c8b5bc3b2a351b.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>解决办法：制作静态库，先生成sub.o文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -c -o sub.o sub.c<br></code></pre></td></tr></table></figure>

<p>制作静态库，在编译生成库文件时，对于静态库要使用ar命令对.o文件链接。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ar crs libsub.a sub.o<br></code></pre></td></tr></table></figure>

<p>使用静态库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -o <span class="hljs-built_in">test</span> main.o libsub.a<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/48f78486c8a23176147189a8a662498f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<h3 id="4、动态库"><a href="#4、动态库" class="headerlink" title="4、动态库"></a>4、动态库</h3><p>动态库：在程序运行时由系统动态加载到内存中供程序调用。可以实现进程间资源共享（共享库）多个程序使用同个动态库，内存中只会出现一个动态库，所以程序共享。<br>机制：多个可执行程序共享一份库文件(共享代码、不共享数据)。<br>使用 gcc -shared 制作动态库，-shared表示要生成的是一个动态库文件</p>
<p><strong>gcc -shared -o lib库名.so 一系列.o文件 (如：add.o sub.o div.o)</strong></p>
<p>制作动态库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -fPIC -shared sub.c -o libsub.so<br></code></pre></td></tr></table></figure>

<p>使用动态库方法1（直接指定当前路径的动态库）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bas">gcc -o test2 main.o libsub.so<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/7efe1556b12bae35cbfb1b3fc19e6841.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>链接可执行程序时，指定所使用的动态库， <strong>-l</strong>：指定动态库名 <strong>-L</strong>：指定动态库路径。<br>补充：**-i**(<strong>大写</strong>)包含要引入的头文件路径</p>
<p>使用动态库方法2（指明动态库路径）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -o test2 main.o -L./ -lsub<br></code></pre></td></tr></table></figure>

<p>运行时，需要添加动态指定路径,<code>:./</code>添加当前路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> LD_LIBRARY_PATH=<span class="hljs-variable">$LD_LIBRARY_PATH</span>:./<br>./test2<br></code></pre></td></tr></table></figure>

<p>总结：<br>1、动态库是否加载到内存，取决于程序是否运行<br>2、动态库每次加载的位置不固定<br>3、动、静态库共存时，编译器<strong>默认</strong>使用动态库</p>
<h3 id="5、头文件依赖"><a href="#5、头文件依赖" class="headerlink" title="5、头文件依赖"></a>5、头文件依赖</h3><p>查看c.c文件的依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -M c.c<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/4ce9f58bd32c2e6f3ed6207781e7e0a9.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom:80%;">

<p>利用-MF指令生成名为c.e的依赖文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -M -MF c.e c.c<br></code></pre></td></tr></table></figure>

<img src="/2024/11/02/Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3-%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E3%80%81%E5%8A%A8%E6%80%81%E5%BA%93%E3%80%81%E9%9D%99%E6%80%81%E5%BA%93%EF%BC%89/5220def4709b3697ab9ea6e511a8032c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" style="zoom: 80%;">

<p>即生成依赖文件 且编译</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -c -o c.o c.c -MD -MF c.e<br></code></pre></td></tr></table></figure>


                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Linux系统下的GCC编译过程、使用命令详解(多文件编译、动态库、静态库）</div>
      <div>http://example.com/2024/11/02/Linux系统下的GCC编译过程、使用命令详解-多文件编译、动态库、静态库）/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>OneAmx</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年11月2日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/10/16/ifdef-cplusplus-extern-C%E7%AC%94%E8%AE%B0/" title="ifdef __cplusplus extern C笔记">
                        <span class="hidden-mobile">ifdef __cplusplus extern C笔记</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>
  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/leancloud.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>

  <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
  <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
  <script type="text/javascript" src="/js/fireworks.js"></script>
  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"left","width":250,"height":500},"mobile":{"show":true}});</script></body>
</html>
